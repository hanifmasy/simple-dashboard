{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      username: '',\n      errorMessage: '',\n      assets: [],\n      cityFilter: ''\n    };\n  },\n  computed: {\n    filteredAssets() {\n      let filtered = this.assets;\n      if (this.cityFilter) {\n        filtered = filtered.filter(asset => asset.location.toLowerCase().includes(this.cityFilter.toLowerCase()));\n      }\n      return filtered;\n    }\n  },\n  methods: {\n    async logout() {\n      try {\n        const response = await fetch('http://localhost:3000/logout', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          localStorage.removeItem('token');\n          this.$router.push('/login');\n        } else {\n          this.errorMessage = 'Failed to logout';\n        }\n      } catch (error) {\n        console.error('Error logging out:', error);\n        this.errorMessage = 'Error logging out';\n      }\n    },\n    async fetchAssets() {\n      try {\n        const response = await fetch('http://localhost:3000/assets', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.ok) {\n          this.assets = await response.json();\n        } else {\n          throw new Error('Failed to fetch assets');\n        }\n      } catch (error) {\n        this.errorMessage = 'Error fetching assets';\n      }\n    },\n    extractCityOptions() {\n      // Extract unique city options from assets\n      this.cityOptions = [...new Set(this.assets.map(asset => asset.location))];\n    }\n  },\n  mounted() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      this.$router.push('/login');\n    } else {\n      this.fetchAssets();\n    }\n  }\n};","map":{"version":3,"names":["data","username","errorMessage","assets","cityFilter","computed","filteredAssets","filtered","filter","asset","location","toLowerCase","includes","methods","logout","response","fetch","method","headers","ok","localStorage","removeItem","$router","push","error","console","fetchAssets","getItem","json","Error","extractCityOptions","cityOptions","Set","map","mounted","token"],"sources":["src/views/DashboardWeb.vue"],"sourcesContent":["<template>\n  <div>\n\n    <div class=\"field\">\n      <button @click=\"logout\" class=\"button is-primary is-pulled-left\">Logout</button>\n    </div>\n\n\n    <div class=\"has-text-centered\">\n      <h2>Dashboard</h2>\n    </div>\n\n    <br><hr>\n    <p class=\"has-text-centered has-text-weight-bold\">{{ errorMessage }}</p>\n    <div class=\"filters\">\n    <label for=\"cityFilter\">City Location:</label>\n        <select v-model=\"selectedCity\" id=\"cityFilter\">\n          <option value=\"\">Select City</option>\n          <option v-for=\"asset in assets\" :value=\"asset.location\">{{ asset.location }}</option>\n        </select>\n    </div>\n    <br>\n    <table>\n      <thead>\n        <tr>\n          <th>Asset</th>\n          <th>Value ($)</th>\n          <th>Location</th>\n          <th>Datetime</th>\n          <th>Holding Duration</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(asset, index) in filteredAssets\" :key=\"index\">\n          <td>{{ asset.name }}</td>\n          <td>{{ asset.value }}</td>\n          <td>{{ asset.location }}</td>\n          <td>{{ asset.begins }}</td>\n          <td>{{ asset.duration }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      username: '',\n      errorMessage: '',\n      assets: [],\n      cityFilter: ''\n    }\n  },\n  computed: {\n    filteredAssets() {\n      let filtered = this.assets;\n\n      if (this.cityFilter) {\n        filtered = filtered.filter(asset => asset.location.toLowerCase().includes(this.cityFilter.toLowerCase()));\n      }\n\n      return filtered;\n    }\n  },\n  methods: {\n    async logout() {\n      try {\n        const response = await fetch('http://localhost:3000/logout', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.ok) {\n          localStorage.removeItem('token');\n          this.$router.push('/login');\n        } else {\n          this.errorMessage = 'Failed to logout';\n        }\n      } catch (error) {\n        console.error('Error logging out:', error);\n        this.errorMessage = 'Error logging out';\n      }\n    },\n    async fetchAssets() {\n      try {\n        const response = await fetch('http://localhost:3000/assets', {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        if (response.ok) {\n          this.assets = await response.json();\n        } else {\n          throw new Error('Failed to fetch assets');\n        }\n      } catch (error) {\n        this.errorMessage = 'Error fetching assets';\n      }\n    },\n    extractCityOptions() {\n      // Extract unique city options from assets\n      this.cityOptions = [...new Set(this.assets.map(asset => asset.location))];\n    }\n  },\n  mounted() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      this.$router.push('/login');\n    } else {\n\n      this.fetchAssets();\n    }\n  }\n}\n</script>\n\n<style>\n.has-text-weight-bold {\n  font-weight: bold;\n}\n.has-text-centered {\n  text-align: center;\n}\ntable {\n  width: 100%;\n  border-collapse: collapse;\n}\nth, td {\n  border: 1px solid #ddd;\n  padding: 8px;\n  text-align: left;\n}\nth {\n  background-color: #f2f2f2;\n}\n</style>\n"],"mappings":";AA8CA;EACAA,KAAA;IACA;MACAC,QAAA;MACAC,YAAA;MACAC,MAAA;MACAC,UAAA;IACA;EACA;EACAC,QAAA;IACAC,eAAA;MACA,IAAAC,QAAA,QAAAJ,MAAA;MAEA,SAAAC,UAAA;QACAG,QAAA,GAAAA,QAAA,CAAAC,MAAA,CAAAC,KAAA,IAAAA,KAAA,CAAAC,QAAA,CAAAC,WAAA,GAAAC,QAAA,MAAAR,UAAA,CAAAO,WAAA;MACA;MAEA,OAAAJ,QAAA;IACA;EACA;EACAM,OAAA;IACA,MAAAC,OAAA;MACA;QACA,MAAAC,QAAA,SAAAC,KAAA;UACAC,MAAA;UACAC,OAAA;YACA;UACA;QACA;QACA,IAAAH,QAAA,CAAAI,EAAA;UACAC,YAAA,CAAAC,UAAA;UACA,KAAAC,OAAA,CAAAC,IAAA;QACA;UACA,KAAArB,YAAA;QACA;MACA,SAAAsB,KAAA;QACAC,OAAA,CAAAD,KAAA,uBAAAA,KAAA;QACA,KAAAtB,YAAA;MACA;IACA;IACA,MAAAwB,YAAA;MACA;QACA,MAAAX,QAAA,SAAAC,KAAA;UACAC,MAAA;UACAC,OAAA;YACA,2BAAAE,YAAA,CAAAO,OAAA;UACA;QACA;QACA,IAAAZ,QAAA,CAAAI,EAAA;UACA,KAAAhB,MAAA,SAAAY,QAAA,CAAAa,IAAA;QACA;UACA,UAAAC,KAAA;QACA;MACA,SAAAL,KAAA;QACA,KAAAtB,YAAA;MACA;IACA;IACA4B,mBAAA;MACA;MACA,KAAAC,WAAA,WAAAC,GAAA,MAAA7B,MAAA,CAAA8B,GAAA,CAAAxB,KAAA,IAAAA,KAAA,CAAAC,QAAA;IACA;EACA;EACAwB,QAAA;IACA,MAAAC,KAAA,GAAAf,YAAA,CAAAO,OAAA;IACA,KAAAQ,KAAA;MACA,KAAAb,OAAA,CAAAC,IAAA;IACA;MAEA,KAAAG,WAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}